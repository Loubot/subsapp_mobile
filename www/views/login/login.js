// Generated by CoffeeScript 1.10.0
window.myApp.controller('login_controller', function($scope, $http, $location, RESOURCES) {
  console.log('login conteroller');
  $scope.user = {};
  return $scope.login_submit = function() {
    $('.login_error').css('display', 'none');
    $http.post(RESOURCES.DOMAIN + "/auth/signin", $scope.login_form_data).success(function(data) {
      var logged_in_user;
      $scope.login_form_data = {};
      $scope.returned = data;
      logged_in_user = data;
      window.localStorage.setItem('user_jwt', JSON.stringify(logged_in_user));
      console.log("user " + JSON.stringify(logged_in_user));
      $location.path('/user');
    }).error(function(err) {
      $('.login_error').show('slide', {
        direction: 'right'
      }, 1000);
      $scope.errorMessage = err;
      console.log("error!!!!!" + JSON.stringify(err));
    });
  };
});
